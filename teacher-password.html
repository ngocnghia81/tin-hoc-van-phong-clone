
<!DOCTYPE html>
<html lang="vi">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Thay Đổi Mật Khẩu - TRUNG TÂM TIN HỌC ABC</title>
        <link rel="stylesheet" href="styles.css" />
        <link rel="stylesheet" href="dashboard.css" />
        <link rel="stylesheet" href="student-dashboard.css" />
        <link rel="stylesheet" href="search-bar.css" />
        <link rel="stylesheet" href="action-buttons.css" />
        <link rel="stylesheet" href="top-buttons.css" />
        <link rel="stylesheet" href="sidebar-buttons.css" />
        <link rel="stylesheet" href="password-change.css" />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap"
            rel="stylesheet"
        />
        <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAC5ElEQVRYR8WXS2gTURSG/zOTNJW2aLUqKLgRBEFwISiCGxERXIgbQRQEQRRduBHcuFJ8IKKIj4ULceHCnSjiRsGFiAhuxIWIIFYUH1DFqtVqk5nxnJk7mTSTzEyK9C7Dvefc8/977jn33BvCMh9a5vhYGYCgXH8EQGMZk1ohhBhz9l0SQKW+F8BpAKMANIBWAXQJwEkAl5IkuVuNJzXAtu1TAC4A0Gb5kSQGcBjA+SiKTjUCqQvgOM5xAJeagJcgBHJEKXWlnk9NgGw2u0FKOQlgfZPgDsQDpdQW13WnF/OtCmBZ1l0AexcZvJLbHaXUvlpeFQCWZW0G8HyJwR2Yj0qpLY7jfK4GUgFgmuZRIcT1FoE7bkeUUjeqQcwDME3zABHdaTG4474gDMObC0EqAEzT3E1Ej9oE7kDsCYLgSbVnMw9g2/ZGIcRUB8DnIKSUm7LZ7OdKkDkA0zRNInrRQXAHYlsQBJPlEHMAhmFcJKJjHQZ3IA4GQXBpAUChUDiulLrYJXAH4kAYhtdmARzH2QngSRfBHYjdURQ9nQGwbXs9Eb3tMrgDsS2Kog+aZVmbiOhTAsAdpVS/lPKXEOJZHMfXwjB8UCwWNwohDhHRHgDbAaxNAH5KKbfkcrnPWqlUWiOl/JEAsBRCrJJSzhDRKgDbhBDH4jg+G0XRnWKxuFoIcYSIRgBsTgJeKpX6tRDiexLAUsrVWuufRLSaiLYS0ZEkSc5FUXRbgud5fQMDA1NE1JcEfBAEA1prVSwWNwghvnULQAixIUmSM2EY3tJzHvI8b3RwcPBVkieklBoOw/CVnvvQ9/3Rvr6+V0mBCCG2R1H0WM95yPO8kYGBgZdJghDR7jAMH+k5gFKptC+O4ztJghDRvjAM7+lqgbTWI1LKe0mCENH+MAzvz9SBXq+3t1AoTBBRf5IgWutDuVzuwWwd6PV6e/L5/AQRbUoSpFwuH87n8w9n68ByfpD+9wfJX2QfYkKBHUPEAAAAAElFTkSuQmCC" />
        <style>
            /* Password Change Page Specific Styles */
            .password-page-container {
                background-color: #fff;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
                padding: 30px;
                margin-bottom: 25px;
                max-width: 600px;
                margin-left: auto;
                margin-right: auto;
            }
            
            .password-page-header {
                text-align: center;
                margin-bottom: 30px;
                padding-bottom: 20px;
                border-bottom: 1px solid #eee;
            }
            
            .password-page-header h2 {
                font-size: 24px;
                color: #0056b3;
                margin-bottom: 10px;
            }
            
            .password-page-header p {
                color: #666;
                margin: 0;
            }
            
            .password-page-icon {
                width: 80px;
                height: 80px;
                background-color: #e8f4ff;
                border-radius: 50%;
                margin: 0 auto 20px;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #0056b3;
                font-size: 36px;
            }
            
            .password-form {
                max-width: 100%;
            }
            
            .password-success.page-message,
            .password-error.page-message {
                display: none;
                padding: 15px;
                border-radius: 4px;
                margin-bottom: 20px;
                text-align: center;
            }
            
            .password-success.page-message {
                background-color: #d4edda;
                color: #155724;
            }
            
            .password-error.page-message {
                background-color: #f8d7da;
                color: #721c24;
            }
            
            .password-success.page-message.show,
            .password-error.page-message.show {
                display: block;
            }
        </style>
    </head>
    <body class="dashboard-body">
        <div class="dashboard-container">
            <!-- Sidebar Navigation -->
            <aside class="sidebar">
                <div class="sidebar-header">
                    <div class="sidebar-user">
                        <div class="user-name center-text" id="sidebarUserName">Phan Thị Ái Ái</div>
                        <div class="user-avatar">
                            <img src="images/avatars/AiAi.png" alt="Phan Thị Ái Ái" class="avatar-img">
                        </div>
                        <div class="user-role center-text">Học viên</div>
                    </div>
                </div>
                
                <nav class="sidebar-nav">
                    <ul>
                        <li>
                            <a href="student-dashboard.html">
                                <i class="fas fa-home"></i>
                                <span>Trang chủ</span>
                            </a>
                        </li>
                        <li>
                            <a href="student-info.html">
                                <i class="fas fa-user"></i>
                                <span>Thông tin học viên</span>
                            </a>
                        </li>
                        <li>
                            <a href="student-schedule.html">
                                <i class="fas fa-calendar-alt"></i>
                                <span>Lịch học</span>
                            </a>
                        </li>
                        <li>
                            <a href="student-results.html">
                                <i class="fas fa-chart-line"></i>
                                <span>Kết quả học tập</span>
                            </a>
                        </li>
                        <li>
                            <a href="student-password.html" class="active">
                                <i class="fas fa-key"></i>
                                <span>Thay đổi mật khẩu</span>
                            </a>
                        </li>
                    </ul>
                </nav>
                
                <div class="sidebar-footer">
                    <a href="index.html" class="logout-btn">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Đăng xuất</span>
                    </a>
                </div>
            </aside>

            <!-- Main Content Area -->
            <main class="main-content">
                <header class="content-header">
                    <button class="menu-toggle" id="menuToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    
                    <div class="header-title">
                        <h1>THAY ĐỔI MẬT KHẨU</h1>
                    </div>
                    
                    <div class="header-actions">
                        <button class="action-btn">
                            <i class="far fa-bell"></i>
                            <span class="badge">2</span>
                        </button>
                        <button class="action-btn">
                            <i class="far fa-envelope"></i>
                            <span class="badge">3</span>
                        </button>
                        <div class="user-dropdown">
                            <button class="user-btn">
                                <i class="fas fa-user-circle"></i>
                                <span id="headerUserName">Phan Thị Ái Ái</span>
                                <i class="fas fa-chevron-down"></i>
                            </button>
                            <div class="dropdown-menu">
                                <a href="student-info.html"><i class="fas fa-user"></i> Thông tin cá nhân</a>
                                <a href="student-password.html"><i class="fas fa-key"></i> Thay đổi mật khẩu</a>
                                <a href="index.html"><i class="fas fa-sign-out-alt"></i> Đăng xuất</a>
                            </div>
                        </div>
                    </div>
                </header>
                
                <div class="content-wrapper">
                    <div class="password-page-container">
                        <div class="password-page-header">
                            <div class="password-page-icon">
                                <i class="fas fa-key"></i>
                            </div>
                            <h2>Thay đổi mật khẩu</h2>
                            <p>Vui lòng điền thông tin bên dưới để thay đổi mật khẩu của bạn</p>
                        </div>
                        
                        <div class="password-success page-message" id="passwordSuccessMessage">
                            Mật khẩu đã được thay đổi thành công!
                        </div>
                        
                        <div class="password-error page-message" id="passwordErrorMessage">
                            Đã xảy ra lỗi khi thay đổi mật khẩu. Vui lòng thử lại.
                        </div>
                        
                        <form class="password-form" id="passwordForm">
                            <div class="form-group">
                                <label for="username">Tên đăng nhập</label>
                                <input type="text" id="username" class="form-input" value="phanai" readonly>
                            </div>
                            
                            <div class="form-group">
                                <label for="currentPassword">Mật khẩu hiện tại</label>
                                <div class="password-input-container">
                                    <input type="password" id="currentPassword" class="form-input" placeholder="Nhập mật khẩu hiện tại">
                                    <button type="button" class="toggle-password">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="newPassword">Mật khẩu mới</label>
                                <div class="password-input-container">
                                    <input type="password" id="newPassword" class="form-input" placeholder="Nhập mật khẩu mới">
                                    <button type="button" class="toggle-password">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="confirmPassword">Xác nhận mật khẩu mới</label>
                                <div class="password-input-container">
                                    <input type="password" id="confirmPassword" class="form-input" placeholder="Nhập lại mật khẩu mới">
                                    <button type="button" class="toggle-password">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="password-requirements">
                                <p>Yêu cầu mật khẩu:</p>
                                <ul>
                                    <li><i class="far fa-circle"></i> Ít nhất 8 ký tự</li>
                                    <li><i class="far fa-circle"></i> Ít nhất 1 chữ cái viết hoa</li>
                                    <li><i class="far fa-circle"></i> Ít nhất 1 chữ cái viết thường</li>
                                    <li><i class="far fa-circle"></i> Ít nhất 1 chữ số</li>
                                </ul>
                            </div>
                            
                            <div class="modal-footer">
                                <button type="submit" class="submit-btn" id="changePasswordBtn">
                                    Thay đổi mật khẩu
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <footer class="content-footer">
                    <p>&copy; 2025 TRUNG TÂM TIN HỌC ABC. Tất cả quyền được bảo lưu.</p>
                </footer>
            </main>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Toggle sidebar on mobile
                const menuToggle = document.getElementById('menuToggle');
                const sidebar = document.querySelector('.sidebar');
                const mainContent = document.querySelector('.main-content');
                
                if (menuToggle) {
                    menuToggle.addEventListener('click', function() {
                        sidebar.classList.toggle('collapsed');
                        mainContent.classList.toggle('expanded');
                    });
                }
                
                // User dropdown
                const userBtn = document.querySelector('.user-btn');
                const dropdownMenu = document.querySelector('.dropdown-menu');
                
                if (userBtn && dropdownMenu) {
                    userBtn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        dropdownMenu.classList.toggle('show');
                    });
                    
                    document.addEventListener('click', function(e) {
                        if (!userBtn.contains(e.target) && !dropdownMenu.contains(e.target)) {
                            dropdownMenu.classList.remove('show');
                        }
                    });
                }
                
                // Elements
                const changePasswordBtn = document.getElementById('changePasswordBtn');
                const usernameInput = document.getElementById('username');
                const currentPasswordInput = document.getElementById('currentPassword');
                const newPasswordInput = document.getElementById('newPassword');
                const confirmPasswordInput = document.getElementById('confirmPassword');
                const togglePasswordButtons = document.querySelectorAll('.toggle-password');
                const passwordRequirements = document.querySelectorAll('.password-requirements li');
                const passwordForm = document.getElementById('passwordForm');
                
                // Toggle password visibility
                togglePasswordButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const input = this.previousElementSibling;
                        const icon = this.querySelector('i');
                        
                        if (input.type === 'password') {
                            input.type = 'text';
                            icon.classList.remove('fa-eye');
                            icon.classList.add('fa-eye-slash');
                        } else {
                            input.type = 'password';
                            icon.classList.remove('fa-eye-slash');
                            icon.classList.add('fa-eye');
                        }
                    });
                });
                
                // Password validation
                if (newPasswordInput) {
                    newPasswordInput.addEventListener('input', validatePassword);
                }
                
                // Confirm password validation
                if (confirmPasswordInput) {
                    confirmPasswordInput.addEventListener('input', function() {
                        validateConfirmPassword();
                    });
                }
                
                // Form submission
                if (passwordForm) {
                    passwordForm.addEventListener('submit', function(e) {
                        e.preventDefault();
                        submitPasswordChange();
                    });
                }
                
                // Functions
                function validatePassword() {
                    const password = newPasswordInput.value;
                    
                    // Validate length
                    validateRequirement(0, password.length >= 8);
                    
                    // Validate uppercase
                    validateRequirement(1, /[A-Z]/.test(password));
                    
                    // Validate lowercase
                    validateRequirement(2, /[a-z]/.test(password));
                    
                    // Validate number
                    validateRequirement(3, /[0-9]/.test(password));
                }
                
                function validateRequirement(index, isValid) {
                    if (index < passwordRequirements.length) {
                        const requirement = passwordRequirements[index];
                        const icon = requirement.querySelector('i');
                        
                        if (isValid) {
                            requirement.classList.add('valid');
                            requirement.classList.remove('invalid');
                            icon.classList.remove('fa-circle', 'fa-times-circle');
                            icon.classList.add('fa-check-circle');
                        } else {
                            requirement.classList.add('invalid');
                            requirement.classList.remove('valid');
                            icon.classList.remove('fa-circle', 'fa-check-circle');
                            icon.classList.add('fa-times-circle');
                        }
                    }
                }
                
                function validateConfirmPassword() {
                    const newPassword = newPasswordInput.value;
                    const confirmPassword = confirmPasswordInput.value;
                    
                    if (confirmPassword && newPassword !== confirmPassword) {
                        showError('Mật khẩu xác nhận không khớp');
                    } else {
                        removeMessages();
                    }
                }
                
                function isPasswordValid() {
                    // Check if all requirements are met
                    const allValid = Array.from(passwordRequirements).every(item => 
                        item.classList.contains('valid')
                    );
                    
                    // Check if passwords match
                    const passwordsMatch = newPasswordInput.value === confirmPasswordInput.value;
                    
                    return allValid && passwordsMatch;
                }
                
                function submitPasswordChange() {
                    // Remove any existing messages
                    removeMessages();
                    
                    // Get form values
                    const username = usernameInput.value;
                    const currentPassword = currentPasswordInput.value;
                    const newPassword = newPasswordInput.value;
                    const confirmPassword = confirmPasswordInput.value;
                    
                    // Validate inputs
                    if (!username || !currentPassword || !newPassword || !confirmPassword) {
                        showError('Vui lòng điền đầy đủ thông tin');
                        return;
                    }
                    
                    // Validate password requirements
                    if (!isPasswordValid()) {
                        showError('Mật khẩu mới không đáp ứng các yêu cầu hoặc không khớp');
                        return;
                    }
                    
                    // Simulate API call to change password
                    setTimeout(() => {
                        // For demo purposes, we'll just show a success message
                        // In a real application, you would send the data to a server
                        showSuccess('Mật khẩu đã được thay đổi thành công!');
                        
                        // Reset form
                        resetPasswordForm();
                    }, 1000);
                }
                
                function showError(message) {
                    const errorMessage = document.getElementById('passwordErrorMessage');
                    if (errorMessage) {
                        errorMessage.textContent = message;
                        errorMessage.classList.add('show');
                    }
                }
                
                function showSuccess(message) {
                    const successMessage = document.getElementById('passwordSuccessMessage');
                    if (successMessage) {
                        successMessage.textContent = message;
                        successMessage.classList.add('show');
                    }
                }
                
                function removeMessages() {
                    const errorMessage = document.getElementById('passwordErrorMessage');
                    const successMessage = document.getElementById('passwordSuccessMessage');
                    
                    if (errorMessage) {
                        errorMessage.classList.remove('show');
                    }
                    
                    if (successMessage) {
                        successMessage.classList.remove('show');
                    }
                }
                
                function resetPasswordForm() {
                    // Clear password fields
                    if (currentPasswordInput) currentPasswordInput.value = '';
                    if (newPasswordInput) newPasswordInput.value = '';
                    if (confirmPasswordInput) confirmPasswordInput.value = '';
                    
                    // Reset password visibility
                    const passwordInputs = document.querySelectorAll('.password-input-container input');
                    const eyeIcons = document.querySelectorAll('.toggle-password i');
                    
                    passwordInputs.forEach(input => {
                        input.type = 'password';
                    });
                    
                    eyeIcons.forEach(icon => {
                        icon.classList.remove('fa-eye-slash');
                        icon.classList.add('fa-eye');
                    });
                    
                    // Reset validation
                    passwordRequirements.forEach(item => {
                        item.classList.remove('valid', 'invalid');
                        const icon = item.querySelector('i');
                        icon.classList.remove('fa-check-circle', 'fa-times-circle');
                        icon.classList.add('fa-circle');
                    });
                }
            });
        </script>
    </body>
</html>
